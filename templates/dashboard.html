<!DOCTYPE html>
<html>
<head>
    <title>Dashboard - Cloud Storage</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<!-- NAVBAR -->
<div class="navbar">
    <div class="logo">‚òÅ Cloud Storage</div>
    <div class="user">Welcome, {{ username }}</div>
</div>

<!-- MAIN CONTENT -->
<div class="container">

    <!-- SEARCH -->
    <form action="{{ url_for('search', username=username) }}" method="GET" class="search-box">
        <input type="text" name="q" placeholder="Search files...">
        <button type="submit">Search</button>
    </form>

    <!-- UPLOAD -->
    <form action="{{ url_for('upload', username=username) }}" method="POST" enctype="multipart/form-data" class="upload-box">
        <input type="file" name="file" required>
        <button type="submit">Upload</button>
    </form>

    <!-- FILE GRID -->
    <div class="file-grid">
        {% for file in files %}
        <div class="file-card">

            <!-- File Name -->
            <div class="file-name">
                {{ file.filename }}
                {% if file.is_private %}
                    üîí
                {% else %}
                    üåç
                {% endif %}
            </div>

            <!-- Action Buttons -->
            <div class="file-actions">

                <!-- Download -->
                <a href="{{ url_for('download', file_id=file.id) }}" class="download">
                    Download
                </a>

                <!-- Preview -->
                <a href="{{ file.file_url }}" target="_blank" class="preview">
                    Preview
                </a>

                <!-- Delete -->
                <a href="{{ url_for('delete', file_id=file.id, username=username) }}" class="delete">
                    Delete
                </a>

                <!-- Toggle Privacy -->
                <a href="{{ url_for('toggle_privacy', file_id=file.id, username=username) }}" class="share">
                    {% if file.is_private %}
                        Make Public
                    {% else %}
                        Make Private
                    {% endif %}
                </a>

                <!-- Share (only if public) -->
                {% if not file.is_private %}
                <a href="{{ url_for('share', file_id=file.id) }}" class="share">
                    Share
                </a>
                {% endif %}

            </div>

            <!-- Rename Section -->
            <form action="{{ url_for('rename_file', file_id=file.id, username=username) }}" method="POST" class="rename-box">
                <input type="text" name="new_name" placeholder="Rename file..." required>
                <button type="submit">Rename</button>
            </form>

        </div>
        {% endfor %}
    </div>

</div>

</body>
</html>